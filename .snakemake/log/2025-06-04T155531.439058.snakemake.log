Building DAG of jobs...
Using shell: /usr/bin/bash
Provided cores: 8
Rules claiming more threads will be scaled down.
Conda environments: ignored
Job stats:
job                         count
------------------------  -------
all                             1
build_quant_sample_table        1
build_samples_table             1
gffcompare                      2
pca_html                        1
prepDE                          1
samtools_stats                  5
stringtie_final_quant           5
stringtie_merge                 1
stringtie_quant                 1
total                          19

Select jobs to execute...

[Wed Jun  4 15:55:32 2025]
rule stringtie_quant:
    input: results/align/EP08_2.bam, data/genome/c_gigas.gtf
    output: results/quant/EP08_2/EP08_2.gtf
    jobid: 12
    reason: Missing output files: results/quant/EP08_2/EP08_2.gtf
    wildcards: sample=EP08_2
    threads: 8
    resources: tmpdir=/tmp

[Wed Jun  4 15:56:35 2025]
Finished job 12.
1 of 19 steps (5%) done
Select jobs to execute...

[Wed Jun  4 15:56:35 2025]
rule samtools_stats:
    input: results/align/Ch14_2.bam
    output: results/summary_qc/Ch14_2.samtools.stats
    jobid: 23
    reason: Missing output files: results/summary_qc/Ch14_2.samtools.stats
    wildcards: sample=Ch14_2
    resources: tmpdir=/tmp


[Wed Jun  4 15:56:35 2025]
rule samtools_stats:
    input: results/align/EP08_2.bam
    output: results/summary_qc/EP08_2.samtools.stats
    jobid: 26
    reason: Missing output files: results/summary_qc/EP08_2.samtools.stats
    wildcards: sample=EP08_2
    resources: tmpdir=/tmp


[Wed Jun  4 15:56:35 2025]
rule samtools_stats:
    input: results/align/EP08_3.bam
    output: results/summary_qc/EP08_3.samtools.stats
    jobid: 27
    reason: Missing output files: results/summary_qc/EP08_3.samtools.stats
    wildcards: sample=EP08_3
    resources: tmpdir=/tmp


[Wed Jun  4 15:56:35 2025]
rule gffcompare:
    input: results/quant/EP08_2/EP08_2.gtf, data/genome/c_gigas.gtf
    output: results/summary_qc/EP08_2.stats, results/summary_qc/EP08_2.loci, results/summary_qc/EP08_2.annotated.gtf, results/summary_qc/EP08_2.tracking
    jobid: 21
    reason: Missing output files: results/summary_qc/EP08_2.tracking, results/summary_qc/EP08_2.loci, results/summary_qc/EP08_2.annotated.gtf, results/summary_qc/EP08_2.stats; Input files updated by another job: results/quant/EP08_2/EP08_2.gtf
    wildcards: sample=EP08_2
    resources: tmpdir=/tmp


[Wed Jun  4 15:56:35 2025]
rule samtools_stats:
    input: results/align/Ch14_3.bam
    output: results/summary_qc/Ch14_3.samtools.stats
    jobid: 24
    reason: Missing output files: results/summary_qc/Ch14_3.samtools.stats
    wildcards: sample=Ch14_3
    resources: tmpdir=/tmp


[Wed Jun  4 15:56:35 2025]
rule samtools_stats:
    input: results/align/EP08_1.bam
    output: results/summary_qc/EP08_1.samtools.stats
    jobid: 25
    reason: Missing output files: results/summary_qc/EP08_1.samtools.stats
    wildcards: sample=EP08_1
    resources: tmpdir=/tmp


[Wed Jun  4 15:56:35 2025]
rule build_samples_table:
    input: results/quant/Ch14_2/Ch14_2.gtf, results/quant/Ch14_3/Ch14_3.gtf, results/quant/EP08_1/EP08_1.gtf, results/quant/EP08_2/EP08_2.gtf, results/quant/EP08_3/EP08_3.gtf
    output: results/quant/samples_table.txt
    jobid: 28
    reason: Missing output files: results/quant/samples_table.txt; Input files updated by another job: results/quant/EP08_2/EP08_2.gtf
    resources: tmpdir=/tmp

[Wed Jun  4 15:56:35 2025]
rule gffcompare:
    input: results/quant/EP08_1/EP08_1.gtf, data/genome/c_gigas.gtf
    output: results/summary_qc/EP08_1.stats, results/summary_qc/EP08_1.loci, results/summary_qc/EP08_1.annotated.gtf, results/summary_qc/EP08_1.tracking
    jobid: 20
    reason: Missing output files: results/summary_qc/EP08_1.annotated.gtf, results/summary_qc/EP08_1.tracking, results/summary_qc/EP08_1.loci, results/summary_qc/EP08_1.stats
    wildcards: sample=EP08_1
    resources: tmpdir=/tmp

[Wed Jun  4 15:56:37 2025]
Finished job 24.
2 of 19 steps (11%) done
[Wed Jun  4 15:56:37 2025]
Finished job 23.
3 of 19 steps (16%) done
[Wed Jun  4 15:56:37 2025]
Finished job 26.
4 of 19 steps (21%) done
[Wed Jun  4 15:56:37 2025]
Finished job 27.
5 of 19 steps (26%) done
[Wed Jun  4 15:56:37 2025]
Finished job 25.
6 of 19 steps (32%) done
[Wed Jun  4 15:56:39 2025]
Finished job 28.
7 of 19 steps (37%) done
Select jobs to execute...
[Wed Jun  4 15:57:48 2025]
Finished job 21.
8 of 19 steps (42%) done
[Wed Jun  4 15:57:48 2025]
Finished job 20.
9 of 19 steps (47%) done

[Wed Jun  4 15:57:48 2025]
rule stringtie_merge:
    input: results/quant/samples_table.txt, data/genome/c_gigas.gtf
    output: results/quant/stringtie_merged.gtf
    jobid: 29
    reason: Missing output files: results/quant/stringtie_merged.gtf; Input files updated by another job: results/quant/samples_table.txt
    threads: 8
    resources: tmpdir=/tmp

[Wed Jun  4 15:58:40 2025]
Finished job 29.
10 of 19 steps (53%) done
Select jobs to execute...

[Wed Jun  4 15:58:40 2025]
rule stringtie_final_quant:
    input: results/align/Ch14_2.bam, results/quant/stringtie_merged.gtf
    output: results/quant_final/Ch14_2/Ch14_2.gtf
    jobid: 31
    reason: Missing output files: results/quant_final/Ch14_2/Ch14_2.gtf; Input files updated by another job: results/quant/stringtie_merged.gtf
    wildcards: sample=Ch14_2
    threads: 8
    resources: tmpdir=/tmp

[Wed Jun  4 15:58:50 2025]
Finished job 31.
11 of 19 steps (58%) done
Select jobs to execute...

[Wed Jun  4 15:58:50 2025]
rule stringtie_final_quant:
    input: results/align/EP08_3.bam, results/quant/stringtie_merged.gtf
    output: results/quant_final/EP08_3/EP08_3.gtf
    jobid: 35
    reason: Missing output files: results/quant_final/EP08_3/EP08_3.gtf; Input files updated by another job: results/quant/stringtie_merged.gtf
    wildcards: sample=EP08_3
    threads: 8
    resources: tmpdir=/tmp

[Wed Jun  4 15:59:00 2025]
Finished job 35.
12 of 19 steps (63%) done
Select jobs to execute...

[Wed Jun  4 15:59:00 2025]
rule stringtie_final_quant:
    input: results/align/EP08_2.bam, results/quant/stringtie_merged.gtf
    output: results/quant_final/EP08_2/EP08_2.gtf
    jobid: 34
    reason: Missing output files: results/quant_final/EP08_2/EP08_2.gtf; Input files updated by another job: results/quant/stringtie_merged.gtf
    wildcards: sample=EP08_2
    threads: 8
    resources: tmpdir=/tmp

[Wed Jun  4 15:59:13 2025]
Finished job 34.
13 of 19 steps (68%) done
Select jobs to execute...

[Wed Jun  4 15:59:13 2025]
rule stringtie_final_quant:
    input: results/align/Ch14_3.bam, results/quant/stringtie_merged.gtf
    output: results/quant_final/Ch14_3/Ch14_3.gtf
    jobid: 32
    reason: Missing output files: results/quant_final/Ch14_3/Ch14_3.gtf; Input files updated by another job: results/quant/stringtie_merged.gtf
    wildcards: sample=Ch14_3
    threads: 8
    resources: tmpdir=/tmp

[Wed Jun  4 15:59:24 2025]
Finished job 32.
14 of 19 steps (74%) done
Select jobs to execute...

[Wed Jun  4 15:59:24 2025]
rule stringtie_final_quant:
    input: results/align/EP08_1.bam, results/quant/stringtie_merged.gtf
    output: results/quant_final/EP08_1/EP08_1.gtf
    jobid: 33
    reason: Missing output files: results/quant_final/EP08_1/EP08_1.gtf; Input files updated by another job: results/quant/stringtie_merged.gtf
    wildcards: sample=EP08_1
    threads: 8
    resources: tmpdir=/tmp

[Wed Jun  4 15:59:33 2025]
Finished job 33.
15 of 19 steps (79%) done
Select jobs to execute...

[Wed Jun  4 15:59:33 2025]
rule build_quant_sample_table:
    input: results/quant_final/Ch14_2/Ch14_2.gtf, results/quant_final/Ch14_3/Ch14_3.gtf, results/quant_final/EP08_1/EP08_1.gtf, results/quant_final/EP08_2/EP08_2.gtf, results/quant_final/EP08_3/EP08_3.gtf
    output: results/quant/samples_quant_table.txt
    jobid: 30
    reason: Missing output files: results/quant/samples_quant_table.txt; Input files updated by another job: results/quant_final/EP08_1/EP08_1.gtf, results/quant_final/Ch14_2/Ch14_2.gtf, results/quant_final/Ch14_3/Ch14_3.gtf, results/quant_final/EP08_2/EP08_2.gtf, results/quant_final/EP08_3/EP08_3.gtf
    resources: tmpdir=/tmp

[Wed Jun  4 15:59:35 2025]
Finished job 30.
16 of 19 steps (84%) done
Select jobs to execute...

[Wed Jun  4 15:59:35 2025]
rule prepDE:
    input: results/quant/samples_quant_table.txt
    output: results/quant/gene_count_matrix.csv, results/quant/transcript_count_matrix.csv
    jobid: 36
    reason: Missing output files: results/quant/transcript_count_matrix.csv, results/quant/gene_count_matrix.csv; Input files updated by another job: results/quant/samples_quant_table.txt
    resources: tmpdir=/tmp

[Wed Jun  4 15:59:57 2025]
Finished job 36.
17 of 19 steps (89%) done
Select jobs to execute...

[Wed Jun  4 15:59:57 2025]
rule pca_html:
    input: results/quant/gene_count_matrix.csv, data/metadata.tsv, scripts/pca_plot.Rmd
    output: results/summary_qc/pca_plot.html
    jobid: 37
    reason: Missing output files: results/summary_qc/pca_plot.html; Input files updated by another job: results/quant/gene_count_matrix.csv
    resources: tmpdir=/tmp

[Wed Jun  4 15:59:58 2025]
Error in rule pca_html:
    jobid: 37
    input: results/quant/gene_count_matrix.csv, data/metadata.tsv, scripts/pca_plot.Rmd
    output: results/summary_qc/pca_plot.html
    conda-env: /home/tripp/GENOMICA/2025_snakemake_tests/.snakemake/conda/8629c5eb326eead54740d81ae84e6daf_
    shell:
        
        MAIN=$(pwd)
        Rscript -e "rmarkdown::render('scripts/pca_plot.Rmd', params = list(main='$MAIN', counts='results/quant/gene_count_matrix.csv', metadata='data/metadata.tsv'))"
        mv scripts/pca_plot.html results/summary_qc/pca_plot.html

        
        (one of the commands exited with non-zero exit code; note that snakemake uses bash strict mode!)

Shutting down, this might take some time.
Exiting because a job execution failed. Look above for error message
Complete log: .snakemake/log/2025-06-04T155531.439058.snakemake.log
